<!DOCTYPE html>
<html lang="en" style="height: 100%;">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://code.jquery.com/jquery-3.1.0.min.js"> </script>
    <title>Parkovki</title>
    <link href="../../dist/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
    <style>
/*    .mynavbar .navbar-nav > .active > a {
      background-color:#0068B2;
      color: white;
    }
    .mynavbar .navbar-nav a:active, .mynavbar .navbar-nav a:hover {
      background-color:#0068B2;
      color: white;
    }
    .mynavbar {
      background-color: #82C0FF;
      border-color: #82C0FF;
    }
*/    </style>
  </head>

  <body style="height: 100%;">

    <nav class="navbar navbar-fixed-top mynavbar">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
	<a class="navbar-brand" href="#">Парковки Москвы</a>
        <div id="navbar" class="collapse navbar-collapse navbar-right">
          <ul class="nav navbar-nav"  role="tablist">
	    <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">Карта</a></li>
	    <li role="presentation"><a href="#mobile" aria-controls="profile" role="tab" data-toggle="tab">Мобильное приложение</a></li>
	    <li role="presentation"><a href="#about" aria-controls="profile" role="tab" data-toggle="tab">О нас</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="tab-content" style="height: 100%;">
    <div role="tabpanel" class="tab-pane active" id="home" style="height: 100%;">
      <div id="map" style="width: 100%; height: calc(100% - 50px); margin-top: 50px;"></div>
    </div>
    <div role="tabpanel" class="tab-pane" id="mobile">ссылка на мобильное приложение</div>
    <div role="tabpanel" class="tab-pane" id="about">текст про нас</div>
    </div>
    <script>
    	var json;
    	var PlaceMarks = [];
    	var coord1 = [];
    	var coord2 = [];
            $.get("parkingmos.json", function (data) {
    	  json = data;
    	  json = JSON.parse(json);
    	  for (i = 0; i < json.length; i++) {
    	      PlaceMarks.push(json[i].Cells.ParkingName + "<br>" + "Время работы: " + json[i].Cells.WorkingHours + "<br>" + "Район: " + json[i].Cells.District + "<br>" + "Адрес: " + json[i].Cells.Address + "<br>" + "Цена: " + json[i].Cells.Price + " ₽<br>" + "Всего мест: " + json[i].Cells.CarCapacity);
    	      coord1.push(parseFloat(json[i].Cells.geoData.coordinates[0][0][0]));
    	      coord2.push(parseFloat(json[i].Cells.geoData.coordinates[0][0][1]));
    	  }
    	});
    	ymaps.ready(init);
    	var myMap;
    	function init() {     
    	    myMap = new ymaps.Map("map", {
    		center: [55.76, 37.64],
    		zoom: 11
    	    });
    	    myPlacemarks = []
    	    for (i = 0; i < PlaceMarks.length; i++) {
    		myPlacemarks.push(new ymaps.Placemark([coord2[i], coord1[i]], { hintContent: 'Свободных мест: ', balloonContent: PlaceMarks[i] }));
    	    }
    	    clusterer = new ymaps.Clusterer({});
    	    clusterer.add(myPlacemarks);
    	    myMap.geoObjects.add(clusterer);
    	}
    </script>
  </body>
</html>
