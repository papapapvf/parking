<!DOCTYPE html>
<html lang="en" style="height: 100%;">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <script src="https://code.jquery.com/jquery-3.1.0.min.js"> </script>
    
    <title>Parkovki</title>

    <!-- Bootstrap core CSS -->
    <link href="../../dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="starter-template.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../../assets/js/ie-emulation-modes-warning.js"></script>
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
    .mynavbar .navbar-nav > .active > a {
      background-color:#0068B2;
      color: white;
    }
    .mynavbar .navbar-nav a:active, .mynavbar .navbar-nav a:hover {
      background-color:#0068B2;
      color: white;
    }
    .mynavbar {
      background-color: #82C0FF;
      border-color: #82C0FF;
    }
    </style>
  </head>

  <body style="height: 100%;">
  
      <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
    
    

    <nav class="navbar navbar-fixed-top mynavbar">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav"  role="tablist">
	    <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">Home</a></li>
	    <li role="presentation"><a href="#mobile" aria-controls="profile" role="tab" data-toggle="tab">Mobile App</a></li>
	    <li role="presentation"><a href="#about" aria-controls="profile" role="tab" data-toggle="tab">About</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="tab-content" style="height: 100%;">
    <div role="tabpanel" class="tab-pane active" id="home" style="height: 100%;">
      <div id="map" style="width: 100%; height:100%"></div>
    </div>
    <div role="tabpanel" class="tab-pane" id="mobile">ссылка на мобильное приложение</div>
    <div role="tabpanel" class="tab-pane" id="about">текст про нас</div>
    </div>
    <script>
	var json;
	var PlaceMarks = [];
	var coord1 = [];
	var coord2 = [];
        $.get("/examples/starter-template/parkingmos.json", function (data) {
	  json = data;
	  //console.log('asd');
	  
	  json = JSON.parse(json);
	  //console.log(json[1]);
	  var s = "CarCapacity: ";
	  for (i = 0; i < json.length; i++) {
	      PlaceMarks.push(s + json[i].Cells.CarCapacity);
	      coord1.push(parseFloat(json[i].Cells.geoData.coordinates[0][0][0]));
	      coord2.push(parseFloat(json[i].Cells.geoData.coordinates[0][0][1]));
	  }
	  //console.log(coord2[1]);
	});
	ymaps.ready(init);
	var myMap;
	function init() {     
	    myMap = new ymaps.Map("map", {
		center: [55.76, 37.64],
		zoom: 11
	    });
	    myPlacemarks = []
	    for (i = 0; i < PlaceMarks.length; i++) {
		myPlacemarks.push(new ymaps.Placemark([coord2[i], coord1[i]], { hintContent: 'P', balloonContent: PlaceMarks[i] }));
	    }
	    clusterer = new ymaps.Clusterer({});
	    clusterer.add(myPlacemarks);
	    myMap.geoObjects.add(clusterer);
	}
    </script>
  </body>
</html>
